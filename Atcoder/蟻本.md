# 蟻本！！

## aribon 2-1 すべての基本 "全探索"

### 例題 2-1-1　部分和問題
- asdf

### 例題 2-1-2 dfs
- Lake Counting (POJ No.2386)
    - ラベリング
    - dfsするだけ
    
### 例題 2-1-3　bfs
- ARC 005 C 器物損壊！高橋君
    - 2回だけ壁を壊すことができる迷路。到達可能性を答える
    - 壁を超えるときはコスト1、それ以外コスト0とするグラフとすると、
    - ダイクストラで最短経路が2以下なら答え。
    - コストが0,1しかないなら、コスト0のときはdequeの先頭、コスト1のときはdequeの末尾、
    とするだけで常に最短経路を辿れる。
    - 0-1 bfsと呼ばれるらしい。
    - 壊したどうかのフラグをもってダイクストラでもいける

### 例題 2-1-4 n!全探索
- ABC 054 C One-stroke Path
    - 巡回セールスマンとしてN^2 2^Nでもとける
    
## aribon 2-2 猪突猛進！ "貪欲法"

### 例題 2-2-1　
- 特になし

### 例題 2-2-2　区間スケジューリング問題
- ABC 103 D - Islands War
    - 一列の島に橋がかかっていて、a_i,b_i番目の島が行き来できないように橋を落とす。壊す橋の最小。
    - 気づきづらいが区間スケジューリング
    - bでソートして貪欲
    
- Codeforces 296 DIV1 B Clique Problem
    - 最大クリーク問題もどき
        - クリーク：任意の二頂点間に枝があるような頂点集合
    - 位置x, 重みwがあり、|x_i - x_j| >= |w_i - w_j|なら辺をはる
    - 遠ければ辺がはられる、直感と逆の設定
    - 各点が x_i - w_i ~ x_i + w_iに広がると考えると、それぞれが重ならなければ辺がある
    - つまり、区間が重ならないように選んだと木の最大数 -> 区間スケジュール
 
### 例題 2-2-3 辞書順
- asdf

### 例題 2-2-4 
- ABC 091 C 2D Plane 2N Points　
    - 最大フローでも解ける
    - 考えると、最適な組み合わせがわかる mada
    
### 例題 2-2-5 priority_queue
- Codeforces 263 DIV2 C Appleman and Toastman
    - x,yを取り出して(x+y)/2を入れる。 mada
    
## aribon 2-3 値を覚えて再利用 "動的計画法"

### 例題 2-3-1　01ナップサック問題
- asdf

### 例題 2-3-2　最長共通部分列問題
- asdf

### 例題 2-3-3　個数制限なしナップサック問題
- asdf

### 例題 2-3-4
- 高橋くんゲーム  
    - 基本的には0-1ナップザックの価値でdpして重みの最小値を求めていくタイプと一緒。  
    - 問題の指定はちょうどK回という制約があるが、実際にはK回以下でn日勝率upできるなら、K回でも達成できること。
    - 肝は、一回負けて以降、全勝すればK回になる。（分母が大きくなれば勝率は上がる）

## 例題 2-3-5
- D - Many Go Round  
    - 個数制限DP。一周するので配列再利用ができない。

- フクロモモンガ  
    - 普通にダイクストラでやってしまった。何がDPかまだわからず。  
    - あみだとは違い、どこからでも移動できるので最適な移動が簡単に決まる。  
    - とりあえず下まで降りていって、降りられなくなったらその分登る。
    - そうすると、結局ある地点まで最短時間でたどり着くやつがえらいので、それをコストにダイクストラ  

- Bichrome Tree  
    - 面白かった。
    - 結局、自分の子供の、自分の色じゃない方の和は小さいほどよいので、
    - 取りうる組み合わせの和のなかで最小値を求めれば良い。  
    - その取りうる組み合わせが最悪2^Nになるので、DPで求める。

- 注文の多い高橋商店  
    - mada

### 例題 2-3-6
- インラインDP  
NQのdpテーブル更新が必要に見えるが、実際にはQ回行う更新ではNの中の一箇所しか更新しない場合、
logN・Qに落とせること。  
LISはある長さの最長増加部分列の最後尾の数だけ更新すれば良くて、それが二部探索でlogNで探せる。的な


### 例題 2-3-7
- 写像12相  
    - N個のボールを、K個の箱に入れる組み合わせで、  
    - Nを区別するか、Kを区別するか、(条件あり、単射、全射）の12個の組み合わせのこと  
    - その中に、スターリング数、ベル数、分割数がある

- 分割数  
    - 正の整数nをm分割するときの場合の数。  
    - dp[i][j] : jのi分割
    - 0を一つでも含むときdp[i-1][j]と、0を含まないときdp[i][j-i]の和

- Kill/Death  
    - dp[i][j] : i番目まで見たときの、総和がjとなる組み合わせ  
    - dp[i+1][j+sm] = dp[i][j] * (smのグループ人数 分割)) これのsmのiteration   
    - すごい解法: https://kimiyuki.net/writeup/algo/atcoder/dwacon2018-prelims-c/

## aribon 2-4 データを工夫して記憶する "データ構造"

### 例題 2-4-1 priority_queue
- ABC 062 D - 3N Numbers
    - asdf

### 例題 2-4-2　二分探索木
- asdf

### 例題 2-4-3 UnionFind
- 食物連鎖 (POJ No.1182)
    - すげえむずい mada
    
- ABC 087 D People on a Line
    - 重み付きUnionFind
    
## aribon 2-5 あれもこれも実は "グラフ"

### 例題 2-5-1　二部グラフ判定
- asdf

### 例題 2-5-2 ダイクストラ
- asdf

### 例題 2-5-3 最小全域木
- asdf

### 例題 2-5-4 ベルマンフォード
- asdf

### 例題 2-5-5 わーシャルフロイド
- asdf

## aribon 2-6 数学的な問題を解くコツ

### 例題 2-6-1 最大公約数
- asdf

### 例題 2-6-2 拡張ユークリッドの互除法
- asdf

### 例題 2-6-3 素数系
- asdf

### 例題 2-6-4 素数　応用
- asdf

### 例題 2-6-5 素数　応用
- asdf

### 例題 2-6-6 繰り返し二乗法
- asdf


## aribon 3-1 値の検索だけじゃない！ "二分探索"

### 例題 3-1-1
- ARC 037 C 億マス計算 
    - 解xを仮定して、部分問題を解く。部分問題に適合するxの最小（最大）値が最終的な解になる。 というパターン
    - 部分問題の判定が、あるxを境に１回だけ変化するような場合、二分探索で高速に解を探索できる。
      
    - 数列の中のK番目の値 -> 数列の中で x より小さい数がK個以上あるような xの中の最小値
    - 部分問題として、さらに二分探索が必要


### 例題 3-1-2
- asdf

### 例題 3-1-3
- JOI 2013 本選 C バームクーヘン
    - xが最小値になりうるか
    - xを超える切り方のうち最小の切り方で２つ切り出したとき、残りの1つがxを超えていればOK
    
### 例題 3-1-4
- ARC 060 C 高橋君とカード
    - N枚のカードを複数選んで平均がちょうどAになるような選び方
    - 各カードからAを引いて和が0になるような選び方にする
    - dp[i][j] = i番目まで使うとき、和がjになるような選び方の総数 
    
- ARC075 E - Meaningful Mean
    - median of mediansの部分問題
    - Al ~ Arの平均値がK以上 ⇒ Bl ~ Brの和が0以上 (Bi = Ai - K)
    - Bl ~ Brの和が0以上 ⇒ Cr - Cl ≧ 0 (Ci = B0 ~ Biの和）
    - Ciの数列で、Ci ≦ Cj となるような i, j の組み合わせの数 ⇒ 転倒数 
    - 転倒数はBITでNlogNで求めることができる。
    - std::sortは安定ソートでないため、順序を変えたくなかったらstable_sortを使う
    
## aribon 3-2 厳選！頻出テクニック

### 例題 3-2-1 しゃくとり 
- ARC 098 D Xor Sum 2
    - A_l + ... + A_r = A_l xor ... xor A_r　となる連続部分列の数
    - 和とxorが一致するのは、bitごとにみたときに1が複数立たないとき
    - lからrまで見て成り立っていればその中の連続部分列は全部OK
    - つまり尺取法
 
### 例題 3-2-2 しゃくとり応用
- ABC 033 D 三角形の分類
    - １点を決めてnC2の三角形を調べる。これをn点分繰り返す。
    - 鈍角と直角の数だけ管理して、鋭角は最後に全体から鈍角と直角を引く。
    - （鈍角、直角はダブルカウントすることがないため）
    - ある辺を決めたら、角度の差θとして θ==90, 90<θ<180となる辺を数えればよい。
    - 角度でソートすると、角度の差が単調増加になるので二分探索か尺取り法が使える。
    - 尺取り法はi,l,rの変数が必要なのでやや面倒。
    
### 例題 3-2-3 ライツアウト
- ABC 083 D Wide Flip
    - 意外とむずかった
    - 左からk番目の数は、左からk個反転させてからk-1個反転させれば自由に操作できることがわかる
    - ひっくり返さなきゃいけないもののなかで、左右から一番遠いものを求めたら答え。
    

### 例題 3-2-4 ライツアウト応用
- AOJ 1308 Awkward Lights
    - マンションのある部屋のスイッチを消すと、マンハッタン距離Dの部屋のon/offが変化
    - 同じ部屋のスイッチを二回押す必要はなく、スイッチを押す順は関係ない
    - 連立方程式

### 例題 3-2-5 弾性衝突
- SRM 458 DIV1 Easy BouncingBalls
    - ボールは通り抜けるだけ、と考えれば通り抜ける数を数えれば終わり。

### 例題 3-2-6 半分全列挙
- ダーツ
    - N個の配列から4つ取り出したときの和のM以下の最大値
    - 2つ取り出した場合の取りうる値を保持してにぶたん

### 例題 3-2-7 半分全列挙 応用
- AGC 026 C - String Coloring
    - 2Nの文字列のうちNを青色、Nを赤色に塗り分けたとき、青と赤の文字列が一致するような塗り方の組み合わせ
    - 左半分のNの青と赤の分割方法、右半分のNの青と赤の分割方法、それぞれ2^N通りを列挙して辞書につっこんで、突き合わせる
    - ABC 049 D 連結にやや似てる
    

### 例題 3-2-8 座標圧縮
- 領域の個数
    - 疎なかたまりがあるような二次元座標でラベリング
    - 何もないところを圧縮
    - 1234 789となっていたとき、56のところになにもないからといって7を5まで圧縮すると
   つながってしまうので、はじっこの±1分は圧縮しないよう気をつける
  
- JOI 2008 予選 E シャッフル
    - 山札があって、a,bのクエリをもらったら上からa枚目までと、b+1枚目から一番下までを交換する
    - 例題とはちょっと様子が違うけど、10枚で3,5のクエリなら、
    - [1,10] -> [1,3],[4,5],[6-10] -> [6-10],[4,5],[1,3]
    - みたいな感じで、分割して、シャッフルする、みたいな感じ

## aribon 3-3 BITとセグ木

### 例題 3-3-1 セグ木
- Crane  
    - むずい。コードは理解はしたがこれじゃないといけないのかわかってない

- タコヤキオイシクナール  
    - 良問。f(x) = ax+b, g(x) = cx + d -> f・g(x) = (ac)x + b+ad なのでモノイド

- JOI 2011 春合宿 day4-2 本棚  
    - 昇順にするには、増加部分列を見つけてそれ以外を動かせば良い。  
    - 動かすやつの重さの和が小さければ良いので、最大重み増加部分列を求める  
    - 末尾がxのときの最大の重みを計算できればよく、[a,b)のmaxが計算できればOK

### 例題 3-3-2 BIT
- ARC 088 E Papple Sort  
    - 文字列を回文にするためのスワップ回数  
    - 最終的に左側に来る必要があるか右側に来る必要があるかは確定している。
    - 肝は、左側を1回swap, 右側を1回swapしてできるなら 右側を2回swapでできるので、
    左側は動かす必要ないため、左側の最終状態も確定する。  
    - 右側を左側にするためのswap回数 -> 転倒数カウントでOK

### 例題 3-3-3 遅延セグ木

- AOJ Course RSQ and RAQ  
    - 区間addと区間sum。
    - 遅延セグ木で簡単だが、伝播させなくてもできる。(区間addが可換だから)

- AOJ Course RMQ and RAQ  
    - 区間addと区間max。Starry Sky Tree。
    - 遅延セグ木で簡単だが、伝播させなくてもできる。(区間addが可換だから)

### 例題 3-3-4 平方分割
- K-th Number (POJ No.2104)  
    - 配列の区間[a,b)の小さい方からk番目の数を答えるクエリを高速に
    - 平方分割
        - 各バケットごとにソートしておく。各バケット内にxより小さい数が何個あるかはにぶたんでいけて、
        xをにぶたんすればok。はみ出した部分はソート前のoriginal配列で線形探索。
    - RangeTreeでもいける
        - 各ノードはマージソートしたときの中間結果(配列)を保持しているイメージ。
        - 区間[a,b)を上から見てひっかかったノードでにぶたんすれば、xより小さい数を数えられる  
        -> 二次元座標でl<=x<rでかつ y<tなる点の数を数えることも可能
- ARC 033 C データ構造
    - 集合にxを追加, x番目に小さい数を求めて集合から削除　のクエリを高速に
    - aがはいる箱を用意して、aが追加されたらa番目を+1するほうが楽
    - 平方分割なら、箱を分割して箱ごとに今何個入っているかも管理すれば楽。       

## 3-4

### 3-4-1

- 組み合わせ列挙
    - {0, 0, 0, 1, 1, 1} なるvectorでnext_permutation
    - 蟻本p144のかっこいいやつ

## aribon 3-7 GCJ の問題に挑戦してみよう

- Numbers  
(3 + √5)^n の整数部分をもとめる  
(3 + √5)^n =  an + √5 bn  
(3 - √5)^n =  an - √5 bn  がわかる
3 - √5 < 1なので、整数部分は 2 * an - 1とわかる
anを求めるために、行列累乗。繰り返し二乗法で行ける。